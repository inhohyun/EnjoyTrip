<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.mapper.member.MemberMapper">

    <resultMap type="member" id="loginMember">
        <result column="login_id" property="loginId"/>
        <result column="login_pw" property="loginPw"/>
    </resultMap>

    <resultMap type="member" id="showMember">
    	<result column="member_id" property="id"/>
        <result column="login_id" property="loginId"/>
        <result column="login_pw" property="loginPw"/>
        <result column="name" property="name"/>
        <result column="nickname" property="nickname"/>
        <result column="email" property="email"/>
        <result column="phone_number" property="phoneNumber"/>
    </resultMap>

    <select id="loginMember" parameterType="member" resultMap="loginMember">
        SELECT login_id, name
        FROM members
        WHERE login_id = #{loginId} and login_pw = #{loginPw}
    </select>

    <delete id="withdrawMember" parameterType="Long">
        DELETE FROM members 
        WHERE member_id = #{id};
    </delete>

    <update id="updateMember" parameterType="member">
        UPDATE members
        SET login_pw = #{loginPw}, nickname = #{nickname}
        WHERE member_id = #{id}
    </update>

    <insert id="joinMember" parameterType="member">
        INSERT INTO members (login_id, login_pw, name, nickname, email, phone_number)
        VALUES(#{loginId}, #{loginPw}, #{name}, #{nickname}, #{email}, #{phoneNumber})
    </insert>

    <select id="getMember" parameterType="Long" resultMap="showMember">
        SELECT member_id, login_id, login_pw, name, nickname, email, phone_number
        FROM members
        WHERE member_id = #{id};
    </select> 

</mapper>
